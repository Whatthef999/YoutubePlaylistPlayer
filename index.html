<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Playlist Player</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
            background: #000;
            color: #fff;
        }
        #player {
            width: 100%;
            height: 400px;
            background: #000;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        .playlist-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .video-item {
         padding: 12px;
         background: #111;
         border-radius: 6px;
         cursor: pointer;
         box-shadow: 0 1px 3px rgba(255,255,255,0.1);
         color: #fff;
}

        .video-item:hover {
        background: #222;
}

        .video-item.active {
        border-left: 4px solid #ff0000;
        background: #2a0000;
}
        }
        .error {
            color: red;
            margin-top: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>YouTube Playlist Player</h1>
    <div id="player"></div>
    <div id="error-message" class="error"></div>
    <div class="playlist-container" id="playlist"></div>

    <!-- Load YouTube IFrame API -->
    <script>
        // Define playlist with KNOWN PUBLIC videos
        const playlist = [
            { id: 'Dbnm-0r3suM', title: 'Gwar - Sick Of You' },
            { id: 'uWKrM5h4QYw', title: 'Gwar - The Road Behind' },
            { id: 'COpdqHBFjRA', title: 'Necro - Cockroaches' }
        ];

        let player;
        let currentVideoIndex = 0;

        // This function MUST be globally accessible
        window.onYouTubeIframeAPIReady = function() {
            player = new YT.Player('player', {
                height: '400',
                width: '100%',
                videoId: playlist[0].id,
                playerVars: {
                    autoplay: 0,
                    controls: 1,
                    rel: 0,
                    modestbranding: 1
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange,
                    'onError': onPlayerError
                }
            });
            renderPlaylist();
        };

        function onPlayerReady(event) {
            highlightCurrentVideo();
        }

        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.ENDED) {
                playNextVideo();
            }
        }

        function onPlayerError(event) {
            const errorDiv = document.getElementById('error-message');
            errorDiv.textContent = `Playback error (Code ${event.data}). Video ID: ${playlist[currentVideoIndex].id}`;
            console.error('YouTube Player Error:', event.data);
            // Skip to next video on error
            setTimeout(playNextVideo, 2000);
        }

        function playVideo(videoId, index) {
            if (!player) return;
            player.loadVideoById(videoId);
            currentVideoIndex = index;
            highlightCurrentVideo();
            document.getElementById('error-message').textContent = '';
        }

        function playNextVideo() {
            currentVideoIndex = (currentVideoIndex + 1) % playlist.length;
            playVideo(playlist[currentVideoIndex].id, currentVideoIndex);
        }

        function highlightCurrentVideo() {
            document.querySelectorAll('.video-item').forEach((el, i) => {
                el.classList.toggle('active', i === currentVideoIndex);
            });
        }

        function renderPlaylist() {
            const container = document.getElementById('playlist');
            container.innerHTML = '';
            playlist.forEach((video, index) => {
                const item = document.createElement('div');
                item.className = 'video-item';
                item.innerHTML = `<strong>${video.title}</strong><br>
                item.onclick = () => playVideo(video.id, index);
                container.appendChild(item);
            });
        }

        // Load YouTube API script dynamically to ensure order
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    </script>
</body>

</html>


